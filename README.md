# mongo-idl

This is a **(very) rough and incomplete** prototype of an IDL definition and code generation tool to be used by MongoDB.

It uses some metaprogramming features of Python to create a DSL for defining message types.

The syntax will seem very familiar if you have previously used the Django ORM, on which mongo-idl
is based.

## Dependencies

```
pip install six mako
```

## Example

```python
import idl

class ExampleMessage(idl.Struct):
    message = idl.String()
    ident = idl.Long()
    success = idl.Bool()


if __name__ == '__main__':
    idl.gen()
```

Put the above code in a file called example.py

Then simply run `python example.py > example.h`

Here is the generated code (with copyright header omitted):
```cpp
//  Note - this file was generated by mongo-idl. Please do not edit it directly, but rather change
//  the associated mongo-idl definition and then regenerate.

#pragma once

#include <string>

namespace mongo {

    class ExampleMessage {
    public:
        // TODO ctor and dtor
        // TODO fromBSON, toBSON

        // Getters
        long getIdent() { return _ident; }
        const std::string& getMessage() { return _message; }
        bool getSuccess() { return _success; }

        // Setters
        void setIdent(long ident) { _ident = ident; }
        void setMessage(const std::string& message) { _message = message; }
        void setSuccess(bool success) { _success = success; }
    private:
        long _ident;
        std::string _message;
        bool _success;
    };

}  // namespace mongo
```
